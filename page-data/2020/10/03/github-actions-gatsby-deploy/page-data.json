{"componentChunkName":"component---src-templates-blog-template-js","path":"/2020/10/03/github-actions-gatsby-deploy/","result":{"data":{"markdownRemark":{"html":"<p>I’ve been on a fun learning journey with Gatsby over the last few weeks. So far, I’ve <a href=\"https://deborah-digges.github.io/2020/09/16/Jekyll-to-Gatsby\">migrated my old Jekyll blog to Gatsby</a>, and created a pipeline that continuously deploys it to GitHub Pages. For creating the CD pipeline, I used Travis CI which I talked about at length in my <a href=\"https://deborah-digges.github.io/2020/09/24/gatsby-deploy\">previous blog post</a>.</p>\n<h2>Introducing... GitHub Actions</h2>\n<p>GitHub has been putting a lot of effort into extending its platform to support repository workflows out-of-the-box.</p>\n<blockquote>\n<p>GitHub Actions is your workflow: built by you, run by us.</p>\n</blockquote>\n<p>What this means is that instead of having my builds run on an external CI server like Travis CI, the GitHub platform itself now supports these capabilities.</p>\n<p>Actions has been in the works for a couple of years now, with the team at GitHub continuously seeking and iterating on community feedback:</p>\n<ul>\n<li>The <a href=\"https://github.blog/2018-10-16-future-of-software/\">Limited Public Beta</a> was announced in late 2018 at GitHub Universe.</li>\n<li>The <a href=\"https://github.blog/2019-08-08-github-actions-now-supports-ci-cd/\">Public Beta</a> was announced in August 2019 with support for CI/CD, custom events, and suggested workflows.</li>\n<li>GitHub Actions was made <a href=\"https://github.blog/2019-11-13-universe-day-one/\">Generally Available</a> in November 2019 at GitHub Universe.</li>\n<li><a href=\"https://enterprise.github.com/releases/2.22.0/notes\">Beta for GitHub Enterprise</a> was launched in  September 2020.</li>\n</ul>\n<h2>Why GitHub Actions?</h2>\n<p>I had a perfectly functioning CD pipeline running in Travis CI.</p>\n<p>The problem? Another link in the chain that could fail, another third party tool I needed to monitor and track the status of, another line-item in my SaaS bill, another service my data flowed through and that I would need to report to my compliance team. You get it.</p>\n<p>Funnily enough, Travis CI was reporting degraded performance when I was trying to set it up for my blog, which made me question my sanity at first since I couldn't get it to work even after a couple of tries.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/071f1f0e7dd7525c4505b706bb7f9775/d8fc6/travis-ci-degraded-service.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACJUlEQVQoz6WTS08TURSA+Qsu3bDGhUmlXfhYSFyIC1ca3bgw/hKDiX/BlQkh1ggY4iOoYICAKEqJGuTRVgpjy6PTQjvTaefVYe7n6bRAookbb/JlzivnnHvumS7k7Fc8yuk8dlbDL2yhAqtlxnY8guCQoxOG6lj2myHiZt9S5MohfiA+pehqOQ8aUNV0/LUMympg1m3SmSyHh+1kruti23Yka7/ylMsH2EHIXsOhYDnkqyFHdaOEuhVSkninVUT0Ws0i+WyEl6/HeTw4xOBQkuHRMRY+LzI3/4nZ2Y8UPZspXWNFd9goKYKo+6hDRcWRDl3wpEpI+1qlUplCYZtv35fJbW6xns5wUKmKrJHf2aUpMRVpQjNgeVdGEHCUUIzFGiu5PfK7Ots7b9GlctWoYZoG9Xody6oJFoZhiM2kLInXZERfN0q8WCgykMxjNIKTK98feMDlvj76+6/RGz9LIn6GePycECPeG2t/hUQiTiLWQ0/fPbrvTtN95xWnbk1y+voj9OLeScIfqzmmZpaYnl1icuoL749JCYudrzCdiuwTM8u8m9d4M7cpbDHx4ac8nN9OGE2smZKnHJMhjsswOrR0d0QY/RtnWHYqKTwVnoj+XMbnRtOPOmzsPMRY78fM3hZuYmZuiH4FY/W8cPEPLhzL1dVLVFckZv0qYbPSubI6Wdb/Paq12OpfCVV7+9sxSv6UENfz8XzB82h4IaYsr+WKr5PnN2n3DRxO4MwWAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Travis CI Degraded Service\"\n        title=\"Travis CI Degraded Service\"\n        src=\"/static/071f1f0e7dd7525c4505b706bb7f9775/5a190/travis-ci-degraded-service.png\"\n        srcset=\"/static/071f1f0e7dd7525c4505b706bb7f9775/772e8/travis-ci-degraded-service.png 200w,\n/static/071f1f0e7dd7525c4505b706bb7f9775/e17e5/travis-ci-degraded-service.png 400w,\n/static/071f1f0e7dd7525c4505b706bb7f9775/5a190/travis-ci-degraded-service.png 800w,\n/static/071f1f0e7dd7525c4505b706bb7f9775/c1b63/travis-ci-degraded-service.png 1200w,\n/static/071f1f0e7dd7525c4505b706bb7f9775/29007/travis-ci-degraded-service.png 1600w,\n/static/071f1f0e7dd7525c4505b706bb7f9775/d8fc6/travis-ci-degraded-service.png 2052w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>GitHub Actions provides some relief from these pitfalls:</p>\n<ul>\n<li>Avoids introducing a third party tool and prevents data from flowing through another service.</li>\n<li>Provides a <a href=\"https://docs.github.com/en/free-pro-team@latest/github/setting-up-and-managing-billing-and-payments-on-github/about-billing-for-github-actions#about-billing-for-github-actions\">lower pricing plan</a> than a separate service for CI/CD. It is free for public repositories and pay-as-you-go for private repositories.</li>\n<li>Allows the <strong>re-use</strong> of shared workflows. This point is especially important as it prevents developers from having to solve the same problems over and over again. Instead, public workflows create an <a href=\"https://github.com/marketplace?type=actions\">ecosystem of Actions</a> that developers can fork, edit, iterate, and improve upon, much like code.</li>\n</ul>\n<h2>How Does a Travis CI Build Work?</h2>\n<p>I’ve gone over how I configured my blog's GitHub repository to use Travis CI in my <a href=\"https://deborah-digges.github.io/2020/09/24/gatsby-deploy\">previous blog post</a>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e178f0254c50b1fe411174f710866daf/1dbe8/travis-toggle.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 9%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAWUlEQVQI132NUQrAIAxDvf/h9rNTDBlSpVbbaTYF97GPBR6EQBKXc8aAmV9KKRjqvU++WpmYYfcnrtZgqqi1wqWUEGMEESGEMP04WKW/QVbDdvg5KCKgp3sDkPuchQx7JbsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Travis CI Webhook\"\n        title=\"Travis CI Webhook\"\n        src=\"/static/e178f0254c50b1fe411174f710866daf/5a190/travis-toggle.png\"\n        srcset=\"/static/e178f0254c50b1fe411174f710866daf/772e8/travis-toggle.png 200w,\n/static/e178f0254c50b1fe411174f710866daf/e17e5/travis-toggle.png 400w,\n/static/e178f0254c50b1fe411174f710866daf/5a190/travis-toggle.png 800w,\n/static/e178f0254c50b1fe411174f710866daf/c1b63/travis-toggle.png 1200w,\n/static/e178f0254c50b1fe411174f710866daf/1dbe8/travis-toggle.png 1374w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>When I enabled my repository for builds in the Travis CI dashboard, it set up a Webhook configuration in the repository on Github.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/46c3fbd22aea4d0cf8bc156bcbab87fb/9e7e4/travis-ci-webhook.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA1UlEQVQoz81Taw+CMAzc//+fIg8xPPZkbGdbRTESQowfvOSydbS3W9lUjBFd32MYRuSc8QFeSzNPsAWuN8YizrPUqxACiuKMqqrgrIX3nhjgnLuTYuc8rMQ0Ug6vW+skb9QaTdvKnKGmaULdtCjrFkXZECuUJF7SeKo7nC4a116TiBURY4yIGiJvoik2oxanIsg2fUwYXIIOGTbMspsn50vSHvgEQRuklF6Cj2Zt9om/7xGrau63COYDhUf45vDvBBeoXzhbU+HHUM8L/CX5IfCVWX7sDQbSY21IvsEIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Travis CI Webhook\"\n        title=\"Travis CI Webhook\"\n        src=\"/static/46c3fbd22aea4d0cf8bc156bcbab87fb/5a190/travis-ci-webhook.png\"\n        srcset=\"/static/46c3fbd22aea4d0cf8bc156bcbab87fb/772e8/travis-ci-webhook.png 200w,\n/static/46c3fbd22aea4d0cf8bc156bcbab87fb/e17e5/travis-ci-webhook.png 400w,\n/static/46c3fbd22aea4d0cf8bc156bcbab87fb/5a190/travis-ci-webhook.png 800w,\n/static/46c3fbd22aea4d0cf8bc156bcbab87fb/c1b63/travis-ci-webhook.png 1200w,\n/static/46c3fbd22aea4d0cf8bc156bcbab87fb/29007/travis-ci-webhook.png 1600w,\n/static/46c3fbd22aea4d0cf8bc156bcbab87fb/9e7e4/travis-ci-webhook.png 2056w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>This configuration caused events generated on this repository to be pushed to a Travis CI hosted webhook, that triggered a build based on the steps defined in my <code>.travis.yml</code> file.</p>\n<h2>Using a GitHub Action to Trigger a Travis CI Build</h2>\n<p>This approach does not do much to improve my workflow as it only changes the integration point between GitHub and Travis CI.</p>\n<p>Instead of a Travis-hosted webhook that listens for Github events, the <a href=\"https://github.com/travis-ci/actions\">Travis-CI GitHub action</a> uses the <a href=\"https://github.com/travis-ci/actions/blob/master/create-build.js#L19\">Travis CI v3 api</a> to trigger a build on Travis CI in response to an event on Github.</p>\n<p>The dependency remains as do the problems related with it. People were quick to <a href=\"https://github.com/travis-ci/actions/issues/3\">catch on</a> though.</p>\n<h2>Using a GitHub Action to Deploy My Gatsby Site (Goodbye, Travis)</h2>\n<p>To eliminate the dependency on Travis CI, I began looking for a GitHub Action that could perform the same functionality as my Travis CI build and deploy pipeline: run a build, run some tests (that don't exist yet), push the generated site to the <code>gh-pages</code> branch of my GitHub repository.</p>\n<p>It didn't prove too hard to find a community-build action for this purpose and integrate my repository with it:</p>\n<ul>\n<li>First off, I disabled the Travis CI build in my <a href=\"https://travis-ci.org/account/repositories\">Travis CI settings</a> which disabled the corresponding Webhook in Github.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3b7b4f38433804f634cc0d95c1f76c02/0e904/disable-travis-ci-build.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 9.499999999999998%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAS0lEQVQI142MUQrAMAhDe//LWipYS9WMCPvZ1wLBEOIb7g56791mzkxQVYWv3o4b7nnPOYiI7sdaC6oKEcGcs/O99xfQzBrEH0KpB8/jnWnaBYWkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Travis CI Disable Toggle\"\n        title=\"Travis CI Disable Toggle\"\n        src=\"/static/3b7b4f38433804f634cc0d95c1f76c02/5a190/disable-travis-ci-build.png\"\n        srcset=\"/static/3b7b4f38433804f634cc0d95c1f76c02/772e8/disable-travis-ci-build.png 200w,\n/static/3b7b4f38433804f634cc0d95c1f76c02/e17e5/disable-travis-ci-build.png 400w,\n/static/3b7b4f38433804f634cc0d95c1f76c02/5a190/disable-travis-ci-build.png 800w,\n/static/3b7b4f38433804f634cc0d95c1f76c02/c1b63/disable-travis-ci-build.png 1200w,\n/static/3b7b4f38433804f634cc0d95c1f76c02/0e904/disable-travis-ci-build.png 1384w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/813ddf6d34b47f1260d53da3b999ce55/1307b/disabled-travis-ci-hook.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA9UlEQVQoz6VR7U7EIBDs+7+TUWPiW3gx9sxx7dEi5csWGJc9S1p/6bnJlAWG2elu431AzkBK9KHw3iOEgF3kRIRIvFzBXOI5f+Wu540QAs45PmzbI+7uH/H61mJUH5BSQg4KvbKYjONi1jrmO8q11jDGVMESTXkUY+LNy+GAh6dnnHoF42cmW0eO50icSH+RmMsrwdPdEj73DhU5KUn6rnBLrO5YcBjGql4qF2x79RtshZtxVDuRrf2/il6Hcj5DT1N1eIvYTjD/o3c/+8iCXX+B6CTexQXHU4dBTTzRZVkYgaa45pFQpq/tDEurDRF+TnWgRfALWS/DZzmckbwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Travis CI Disabled Webhook\"\n        title=\"Travis CI Disabled Webhook\"\n        src=\"/static/813ddf6d34b47f1260d53da3b999ce55/5a190/disabled-travis-ci-hook.png\"\n        srcset=\"/static/813ddf6d34b47f1260d53da3b999ce55/772e8/disabled-travis-ci-hook.png 200w,\n/static/813ddf6d34b47f1260d53da3b999ce55/e17e5/disabled-travis-ci-hook.png 400w,\n/static/813ddf6d34b47f1260d53da3b999ce55/5a190/disabled-travis-ci-hook.png 800w,\n/static/813ddf6d34b47f1260d53da3b999ce55/c1b63/disabled-travis-ci-hook.png 1200w,\n/static/813ddf6d34b47f1260d53da3b999ce55/29007/disabled-travis-ci-hook.png 1600w,\n/static/813ddf6d34b47f1260d53da3b999ce55/1307b/disabled-travis-ci-hook.png 3000w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>I then searched on the <a href=\"https://github.com/marketplace\">GitHub Actions Marketplace</a> for a <a href=\"https://github.com/marketplace/actions/gatsby-publish\">suitable action</a> to deploy a Gatsby site to GitHub Pages.</li>\n<li>I added the action to a YAML file in my repository under <a href=\"https://github.com/Deborah-Digges/deborah-digges.github.io/blob/master/.github/workflows/build_and_publish.yml\">.github/workflows</a>.\n<div id=\"gist105696602\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-build_and_publish-yml\" class=\"file my-2\">\n    \n    <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-yaml  \">\n\n        \n<div class=\"js-check-bidi js-blob-code-container blob-code-content\">\n\n  <template class=\"js-file-alert-template\">\n  <div data-view-component=\"true\" class=\"flash flash-warn flash-full d-flex flex-items-center\">\n  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-alert\">\n    <path fill-rule=\"evenodd\" d=\"M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z\"></path>\n</svg>\n  \n    <span>\n      This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.\n      <a href=\"https://github.co/hiddenchars\" target=\"_blank\">Learn more about bidirectional Unicode characters</a>\n    </span>\n\n\n  <div data-view-component=\"true\" class=\"flash-action\">      <a href=\"{{ revealButtonHref }}\" data-view-component=\"true\" class=\"btn-sm btn\">  Show hidden characters\n  \n</a>\n</div>\n</div></template>\n<template class=\"js-line-alert-template\">\n  <span aria-label=\"This line has hidden Unicode characters\" data-view-component=\"true\" class=\"line-alert tooltipped tooltipped-e\">\n    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-alert\">\n    <path fill-rule=\"evenodd\" d=\"M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z\"></path>\n</svg>\n</span></template>\n\n  <table class=\"highlight tab-size js-file-line-container js-code-nav-container js-tagsearch-file\" data-tab-size=\"8\" data-paste-markdown-skip data-tagsearch-lang=\"YAML\" data-tagsearch-path=\"build_and_publish.yml\">\n        <tr>\n          <td id=\"file-build_and_publish-yml-L1\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"1\"></td>\n          <td id=\"file-build_and_publish-yml-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-ent\">name</span>: <span class=\"pl-s\">Gatsby Publish</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-build_and_publish-yml-L2\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"2\"></td>\n          <td id=\"file-build_and_publish-yml-LC2\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-build_and_publish-yml-L3\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"3\"></td>\n          <td id=\"file-build_and_publish-yml-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-ent\">on</span>:</td>\n        </tr>\n        <tr>\n          <td id=\"file-build_and_publish-yml-L4\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"4\"></td>\n          <td id=\"file-build_and_publish-yml-LC4\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-ent\">push</span>:</td>\n        </tr>\n        <tr>\n          <td id=\"file-build_and_publish-yml-L5\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"5\"></td>\n          <td id=\"file-build_and_publish-yml-LC5\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-ent\">branches</span>:</td>\n        </tr>\n        <tr>\n          <td id=\"file-build_and_publish-yml-L6\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"6\"></td>\n          <td id=\"file-build_and_publish-yml-LC6\" class=\"blob-code blob-code-inner js-file-line\">      <span class=\"pl-s\">master</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-build_and_publish-yml-L7\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"7\"></td>\n          <td id=\"file-build_and_publish-yml-LC7\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-build_and_publish-yml-L8\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"8\"></td>\n          <td id=\"file-build_and_publish-yml-LC8\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-ent\">jobs</span>:</td>\n        </tr>\n        <tr>\n          <td id=\"file-build_and_publish-yml-L9\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"9\"></td>\n          <td id=\"file-build_and_publish-yml-LC9\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-ent\">build</span>:</td>\n        </tr>\n        <tr>\n          <td id=\"file-build_and_publish-yml-L10\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"10\"></td>\n          <td id=\"file-build_and_publish-yml-LC10\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-ent\">runs-on</span>: <span class=\"pl-s\">ubuntu-latest</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-build_and_publish-yml-L11\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"11\"></td>\n          <td id=\"file-build_and_publish-yml-LC11\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-ent\">steps</span>:</td>\n        </tr>\n        <tr>\n          <td id=\"file-build_and_publish-yml-L12\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"12\"></td>\n          <td id=\"file-build_and_publish-yml-LC12\" class=\"blob-code blob-code-inner js-file-line\">      - <span class=\"pl-ent\">uses</span>: <span class=\"pl-s\">actions/checkout@v1</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-build_and_publish-yml-L13\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"13\"></td>\n          <td id=\"file-build_and_publish-yml-LC13\" class=\"blob-code blob-code-inner js-file-line\">      - <span class=\"pl-ent\">uses</span>: <span class=\"pl-s\">enriikke/gatsby-gh-pages-action@v2</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-build_and_publish-yml-L14\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"14\"></td>\n          <td id=\"file-build_and_publish-yml-LC14\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-ent\">with</span>:</td>\n        </tr>\n        <tr>\n          <td id=\"file-build_and_publish-yml-L15\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"15\"></td>\n          <td id=\"file-build_and_publish-yml-LC15\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-ent\">access-token</span>: <span class=\"pl-s\">${{ secrets.ACCESS_TOKEN }}</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-build_and_publish-yml-L16\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"16\"></td>\n          <td id=\"file-build_and_publish-yml-LC16\" class=\"blob-code blob-code-inner js-file-line\">          <span class=\"pl-ent\">deploy-branch</span>: <span class=\"pl-s\">gh-pages</span></td>\n        </tr>\n  </table>\n</div>\n\n\n    </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/Deborah-Digges/6e4f6572b7e75925ed8aa3f5411cbcc8/raw/6817baac61bfa72f4a74e05489ccfc352d88e5a8/build_and_publish.yml\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/Deborah-Digges/6e4f6572b7e75925ed8aa3f5411cbcc8#file-build_and_publish-yml\">\n          build_and_publish.yml\n        </a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></li>\n</ul>\n<p>I was a little disappointed with this step as I was hoping for a one-click option in the marketplace which would allow me to commit a workflow file to my repository.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2353cbd6c58a877158005fbd5d4199d1/a2b91/github-action-setup.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB1ElEQVQoz32Rz2sTQRTH829FTUyTJsW713osXvTgQQztamZ2dmd2dvZHBEVvHkSDbTS0UoLt2bP/g0VpopWooSlCv77Z3ZSGQAe+vMe89z7z5r1SvXULtdU1VOtNVBtWLVTIX2muodZs4frNBqmOa9Vc5coK2VzWL1dqKJN/o7ZKaqAURglMnCBKEsgggq9iuNLH61cDfPl8hKPvXzEajTEe/8Df6RT7wyG458MkaV4X53auUpQFUnSfdXF/w8XdOx1sMQeDwT4mJ6eY/J5gNpvh7GwGe3of+7h9bx3rjzbwwG0jSZ8WDaWZSnNynKZgTMJxBB622xgeHOD03zm+HZ9g9GuK459/cE7AT4eHcDiDTmIEUUQdJosdzh1Ll1rDUwpc+Hj+4iW2+x/Q2+7j7Zse3u28x2B3L7sX9GUdmou6y4wFoPAlXEoOKNla5gqCe+DchUtW+Aod8hnn2Nx6TDPXVwNlGIJ5EpwKPaWpY4OQYtqKlmcXqGne0qT03W7m22WaYjFLQGUicAIpE19IhhEBchtYS4+4KspimnRlh8oYMEndUZEFXAZbWaCiexHEC5BlYHFpkx1PYJN5tEmaoR9AFF/3i0c8GeAJzbFD85U6XAL+B2LgEANajm4YAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"GitHub Action Setup\"\n        title=\"GitHub Action Setup\"\n        src=\"/static/2353cbd6c58a877158005fbd5d4199d1/5a190/github-action-setup.png\"\n        srcset=\"/static/2353cbd6c58a877158005fbd5d4199d1/772e8/github-action-setup.png 200w,\n/static/2353cbd6c58a877158005fbd5d4199d1/e17e5/github-action-setup.png 400w,\n/static/2353cbd6c58a877158005fbd5d4199d1/5a190/github-action-setup.png 800w,\n/static/2353cbd6c58a877158005fbd5d4199d1/c1b63/github-action-setup.png 1200w,\n/static/2353cbd6c58a877158005fbd5d4199d1/29007/github-action-setup.png 1600w,\n/static/2353cbd6c58a877158005fbd5d4199d1/a2b91/github-action-setup.png 3360w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>To give the workflow the ability to push to my repository, I added the environment variable <code>ACCESS_TOKEN</code> to my GitHub repository <code>Secrets</code> with a personal <a href=\"https://github.com/settings/tokens/\">GitHub token</a>.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/512b8b1d82b5b581eb6907e5e7959211/a2b91/github-repository-secrets.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA2klEQVQoz52S6w7CIAyFff8nnToWZeVSoKttDWwz8Yc2OYF2h2/lcmGJ1hrnjLxtmynnzAAwciJiEg/Vat4uXQMQhk91UWAV4zzPBtJQ0zRdpeb4dr+zcwv7dTWtEDnEzCEEjjExlsI9TsDH42mdaLE2yeHJPqzWBSKaR0cISb6TATQnAcoSpZ2BzrkBtG1u7/kx+va7R7dNbfcNYJE/ee9H8Qg6ns/X+ARah8tiZ3IE/KITUCd6EQr+N5S5dyhnobCEjSEVExZ5IlJ7X0axsat7ElaOKE+K9g5fq/125IUSq3AAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"GitHub Repository Secrets Tab\"\n        title=\"GitHub Repository Secrets Tab\"\n        src=\"/static/512b8b1d82b5b581eb6907e5e7959211/5a190/github-repository-secrets.png\"\n        srcset=\"/static/512b8b1d82b5b581eb6907e5e7959211/772e8/github-repository-secrets.png 200w,\n/static/512b8b1d82b5b581eb6907e5e7959211/e17e5/github-repository-secrets.png 400w,\n/static/512b8b1d82b5b581eb6907e5e7959211/5a190/github-repository-secrets.png 800w,\n/static/512b8b1d82b5b581eb6907e5e7959211/c1b63/github-repository-secrets.png 1200w,\n/static/512b8b1d82b5b581eb6907e5e7959211/29007/github-repository-secrets.png 1600w,\n/static/512b8b1d82b5b581eb6907e5e7959211/a2b91/github-repository-secrets.png 3360w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>With all that out of the way, I was able to trigger my first build by merging to the master branch of my repository!</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/02a009e66ca075db37ba33e464f8e813/a2b91/github-actions-progress.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABbUlEQVQoz2WSzVbCMBCF+5ToUcAKCiq68E08x70vohsfwoVrcQH9lTRt0ia9TpKmFMg5H51kkps7E4LF6hmz5RMm83viAeHtCvPlCjd3j5jOlji7DHE+vu4xc8/oYkpcYUTxOFxgEt4g+I0YDNuM03eHNNuhLDmKsgInWMHdl5coCFk3FiFrmysrYfMmVwqJAG2LplH4iUkwFfheM8Q5R55nqISA1tqilKOl/S1g8YOW3BoFgVkohMbb5wav71u8fCT4WnNUvCDB2oqYCxvVQbFxWBsah72kIzA/p0MhSRLsWHEgUElFULlUmik1/2PUHgGv0Ts0gdYtVIemeZKm2GwjRHFCvSogpYBU1B7tDps2MLrQVOA1BoL7BZ9M04xcpuSgso6auoZsqHzl9igqv+C872vvcDgZxkYsimJ69cy5ZMw6rDtHRsg5VIc99ALHw72sf4imO+iq2bdJnxg5cGgOefzfZcgw7/ccV/gPqI3rJooM6fQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"GitHub Actions Build in Progress\"\n        title=\"GitHub Actions Build in Progress\"\n        src=\"/static/02a009e66ca075db37ba33e464f8e813/5a190/github-actions-progress.png\"\n        srcset=\"/static/02a009e66ca075db37ba33e464f8e813/772e8/github-actions-progress.png 200w,\n/static/02a009e66ca075db37ba33e464f8e813/e17e5/github-actions-progress.png 400w,\n/static/02a009e66ca075db37ba33e464f8e813/5a190/github-actions-progress.png 800w,\n/static/02a009e66ca075db37ba33e464f8e813/c1b63/github-actions-progress.png 1200w,\n/static/02a009e66ca075db37ba33e464f8e813/29007/github-actions-progress.png 1600w,\n/static/02a009e66ca075db37ba33e464f8e813/a2b91/github-actions-progress.png 3360w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>Reaping the Benefits</h2>\n<p>Even with this small project, I’ve reaped the benefits of GitHub Actions:</p>\n<ul>\n<li>My blog's build process no longer has a dependency on Travis CI. I was able to disable the repository on Travis CI and also delete my account.</li>\n<li>I was able to <a href=\"https://github.com/Deborah-Digges/deborah-digges.github.io/commit/d421e5570f9c2c9f68e59f2ebc3078fd65d642ba\">remove the code</a> and knowledge about how to deploy to Github Pages within my project by reusing a shared workflow built by someone else.</li>\n</ul>\n<p>I’m excited to have explored GitHub actions and what it’s capable of by re-using an existing workflow. Join me in my next blog post to explore how to write a custom workflow from scratch!</p>","frontmatter":{"title":"Streamlining Gatsby Deployments with GitHub Actions"},"fields":{"date":"2020-10-03","slug":"2020/10/03/github-actions-gatsby-deploy/"}}},"pageContext":{"slug":"2020/10/03/github-actions-gatsby-deploy/","date":"2020-10-03"}},"staticQueryHashes":[]}